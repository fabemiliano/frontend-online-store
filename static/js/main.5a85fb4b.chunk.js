(this["webpackJsonpsd-0x-block15-project-frontend-online-store"]=this["webpackJsonpsd-0x-block15-project-frontend-online-store"]||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){e.exports=a.p+"static/media/carrinho.2ad5e133.png"},30:function(e,t,a){e.exports=a.p+"static/media/cart.c343ae9b.png"},31:function(e,t,a){e.exports=a(51)},36:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),l=(a(36),a(1)),i=a(2),s=a(4),u=a(3),m=a(7),d=a(5),p=a(14),h=(a(37),a(16)),v=a.n(h),f=a(20);function E(){return(E=Object(f.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(f.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(39);var g=a(15),y=a(11),O=a(28),k=a.n(O),j=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).addCart=n.addCart.bind(Object(p.a)(n)),n}return Object(i.a)(a,[{key:"addCart",value:function(){var e=this.props.product,t=JSON.parse(localStorage.getItem("cart"));if(!t)return e.quantity=1,localStorage.setItem("cart",JSON.stringify([Object(y.a)(Object(y.a)({},e),{},{total:1})]));var a=t.find((function(t){return t.id===e.id}));if(a){var n=t.indexOf(a);return"undefined"===a.quantity?t[n].total=1:t[n].total+=1,localStorage.setItem("cart",JSON.stringify(t))}return e.quantity=1,localStorage.setItem("cart",JSON.stringify([].concat(Object(g.a)(t),[Object(y.a)(Object(y.a)({},e),{},{total:1})])))}},{key:"render",value:function(){return r.a.createElement("button",{type:"button",onClick:this.addCart,"data-testid":"product-add-to-cart",className:"button-add"},"Adicionar ao Carrinho",r.a.createElement("img",{src:k.a,width:"20px",alt:"cart-icon"}))}}]),a}(n.Component);var S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={products:[],showProducts:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props;(function(e,t){return b.apply(this,arguments)})(t.category,t.item).then((function(t){e.setState({products:t.results,showProducts:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.products,a=e.showProducts;return 0===t.length&&!0===a?r.a.createElement("p",null,"Nenhum produto foi encontrado"):r.a.createElement("div",{className:"product-list"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"product","data-testid":"product"},r.a.createElement("p",{className:"search-result"},e.title),r.a.createElement("img",{src:e.thumbnail,alt:"foto"}),r.a.createElement("p",null,"R$",e.price),e.shipping.free_shipping&&r.a.createElement("p",{"data-testid":"free-shipping"},"Frete Gr\xe1tis"),function(e,t){return console.log(this),r.a.createElement("button",{type:"button"},r.a.createElement(m.b,{className:"link-detalhes","data-testid":"product-detail-link",to:{pathname:"/".concat(e,"/details"),state:t}},"VER DATALHES"))}(e.id,e),r.a.createElement(j,{product:e}))})))}}]),a}(r.a.Component),C=a(30),N=a.n(C);a(45);var x=function(){var e=JSON.parse(localStorage.getItem("cart"));null===e&&(e=[]);var t=e.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",{className:"cart-info"},r.a.createElement(m.b,{to:"/cart"},r.a.createElement("img",{src:N.a,width:"70px",alt:"cart-icon","data-testid":"shopping-cart-button",className:"img-cart"})),r.a.createElement("p",null,"Produtos no Carrinho: "),r.a.createElement("div",{"data-testid":"shopping-cart-size"},t||"0"))};var I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={item:"",category:"",search:!1,searchWithCategory:!1,categories:[]},n.changeValue=n.changeValue.bind(Object(p.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return E.apply(this,arguments)})().then((function(t){return e.setState({categories:t})}))}},{key:"getCategory",value:function(e){this.setState({category:e,search:!1,searchWithCategory:!0})}},{key:"doSearch",value:function(){this.setState({search:!0,searchWithCategory:!1})}},{key:"changeValue",value:function(e){this.setState({item:e.target.value,search:!1})}},{key:"renderSearchBar",value:function(){return r.a.createElement("center",null,r.a.createElement("input",{"data-testid":"query-input",type:"text",className:"input",onChange:this.changeValue}),r.a.createElement("p",{"data-testid":"home-initial-message",className:"texto-pesquisa"},"Digite algum termo de pesquisa ou escolha uma categoria."))}},{key:"renderCategories",value:function(){var e=this;return this.state.categories.map((function(t){return r.a.createElement("div",{className:"categories"},r.a.createElement("button",{type:"button","data-testid":"category",key:t.id,value:t.name,onClick:function(){return e.getCategory(t.id)}},t.name))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.item,n=t.search,c=t.searchWithCategory,o=t.category;return r.a.createElement("div",null,r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"searchbar"},this.renderSearchBar(),r.a.createElement("button",{"data-testid":"query-button",type:"button",onClick:function(){return e.doSearch()}},"PESQUISAR")),r.a.createElement(x,{className:"cart-icon"})),r.a.createElement("div",{className:"product-sidebar"},r.a.createElement("div",{className:"aside-categoria"},r.a.createElement("h3",null,"Ou selecione uma categoria:"),this.renderCategories()),n&&r.a.createElement(S,{item:a}),c&&r.a.createElement(S,{category:o,item:a})))}}]),a}(r.a.Component),q=(a(25),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a);var r=(n=t.call(this,e)).props.total;return n.state={total:r},n}return Object(i.a)(a,[{key:"decrease",value:function(){this.state.total>0&&this.setState((function(e){return{total:e.total-1}}))}},{key:"increase",value:function(){var e=this.props.quantity;this.state.total<e&&this.setState((function(e){return{total:e.total+1}}))}},{key:"render",value:function(){var e=this,t=this.state.total,a=this.props,n=a.title,c=a.thumbnail,o=a.price;return r.a.createElement("div",{className:"cart-item"},r.a.createElement("img",{src:c,alt:n}),r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},n),r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:function(){return e.decrease(t)}},"-"),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},t),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",onClick:function(){return e.increase()}},"+"),r.a.createElement("div",null,"Valor: R$".concat(o)))}}]),a}(r.a.Component));var w=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=JSON.parse(localStorage.getItem("cart"));return n.state={arrayProducts:r},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.arrayProducts;if(localStorage.setItem("cart",JSON.stringify(e)),e){localStorage.setItem("totalItems",1)}}},{key:"render",value:function(){var e=this.state.arrayProducts;return e&&0!==e.length?r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"h2-fixo"},"Carrinho de compras: "),r.a.createElement("div",{className:"lista-pai"},e.map((function(e){return r.a.createElement(q,{key:e.title,title:e.title,total:e.total,price:e.price,thumbnail:e.thumbnail,quantity:e.available_quantity})}))),r.a.createElement("div",{className:"option-buttons"},r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{type:"button"},"VOLTAR")),r.a.createElement(m.b,{"data-testid":"checkout-products",to:"/checkout"},r.a.createElement("button",{type:"button"},"FINALIZAR COMPRA")))):r.a.createElement("div",{className:"empty-page"},r.a.createElement("div",{className:"empty_content","data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{type:"button",className:"back-button"},"VOLTAR")))}}]),a}(r.a.Component),J=(a(46),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={total:0},n}return Object(i.a)(a,[{key:"decrease",value:function(){this.state.total>0&&this.setState((function(e){return{total:e.total-1}}))}},{key:"increase",value:function(){var e=this.props.quantity;this.state.total<e&&this.setState((function(e){return{total:e.total+1}}))}},{key:"addToCart",value:function(){var e=this.state.total,t=this.props.info,a=Object(y.a)(Object(y.a)({},t),{},{total:e}),n=JSON.parse(localStorage.getItem("cart"));null===n&&(n=[]);var r=JSON.stringify([].concat(Object(g.a)(n),[a]));localStorage.setItem("cart",r)}},{key:"render",value:function(){var e=this,t=this.state.total;return r.a.createElement("div",null,r.a.createElement("h1",null,"Quantidade"),r.a.createElement("button",{type:"button",className:"increment",onClick:function(){return e.decrease()}},"-"),t,r.a.createElement("button",{type:"button",className:"increment",onClick:function(){return e.increase()}},"+"),r.a.createElement("button",{"data-testid":"product-detail-add-to-cart",type:"button",onClick:function(){return e.addToCart()}},"Adicionar ao Carrinho"))}}]),a}(r.a.Component)),A=a(17),F=a(18),T=a.n(F),P=(a(26),a(48),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"renderComments",value:function(){var e=this;return JSON.parse(localStorage.getItem("comments")).map((function(t){return r.a.createElement("div",{className:"comment",key:t.email},r.a.createElement("p",null,"Email: ".concat(t.email)),r.a.createElement("p",null,"Mensagem: ".concat(t.message)),r.a.createElement("p",null,"Nota:",r.a.createElement(T.a,{name:"rate1",className:"stars",starCount:5,value:t.rating,onStarClick:function(){return e.onStarClick()}})))}))}},{key:"render",value:function(){return JSON.parse(localStorage.getItem("comments"))?r.a.createElement("div",{className:"comment-box"},r.a.createElement("h1",null,"Coment\xe1rios"),r.a.createElement("div",{"data-testid":"product-detail-evaluation"},this.renderComments())):r.a.createElement("div",{className:"comment-box"},r.a.createElement("h1",null,"Coment\xe1rios"),r.a.createElement("p",null,"Sem coment\xe1rios ainda"))}}]),a}(r.a.Component)),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={email:"",message:"",rating:0},n}return Object(i.a)(a,[{key:"onStarClick",value:function(e){this.setState({rating:e})}},{key:"updateField",value:function(e,t){this.setState(Object(A.a)({},e,t.target.value))}},{key:"createComment",value:function(){var e=this.state,t=e.email,a=e.message,n=e.rating,r=JSON.parse(localStorage.getItem("comments"));null===r&&(r=[]);var c=[].concat(Object(g.a)(r),[{email:t,message:a,rating:n}]);localStorage.setItem("comments",[JSON.stringify(c)]),this.setState({email:"",message:"",rating:0})}},{key:"renderEmail",value:function(){var e=this,t=this.state.email;return r.a.createElement("div",{className:"rating-section"},r.a.createElement("input",{id:"email",placeholder:"E-mail",value:t,onChange:function(t){return e.updateField("email",t)}}))}},{key:"renderTextArea",value:function(){var e=this,t=this.state.message;return r.a.createElement("textarea",{placeholder:"Mensagem","data-testid":"product-detail-evaluation",value:t,onChange:function(t){return e.updateField("message",t)}})}},{key:"render",value:function(){var e=this,t=this.state.rating;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("h2",null,"Deixe sua Avalia\xe7\xe3o"),r.a.createElement(T.a,{name:"rate1",className:"stars",starCount:5,value:t,onStarClick:function(t){return e.onStarClick(t)}}),this.renderEmail(),this.renderTextArea(),r.a.createElement("button",{type:"button",className:"rating-button",onClick:function(){return e.createComment()}},"Avaliar")),r.a.createElement("div",null,r.a.createElement(P,null)))}}]),a}(r.a.Component),M=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.location.state,t=e.title,a=e.price,n=e.id,c=e.thumbnail,o=e.address,l=e.condition,i=e.available_quantity,s=this.props.location.state;return r.a.createElement("section",null,r.a.createElement("div",{className:"headerDetails"},r.a.createElement("div",{"data-testid":"product"},r.a.createElement("h3",{"data-testid":"product-detail-name"},t),r.a.createElement("h4",null,n),r.a.createElement("img",{src:c,alt:t}),r.a.createElement("h4",null,"Pre\xe7o: R$ ".concat(a)),r.a.createElement("p",null,o.city_name),r.a.createElement("p",null,l),r.a.createElement(J,{quantity:i,info:s}),r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{type:"button"},"VOLTAR")),r.a.createElement(R,null))),r.a.createElement(x,null))}}]),a}(n.Component);a(49);var V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={total:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.renderTotal()}},{key:"calculateTotal",value:function(e,t){var a=e*t;this.setState((function(e){return{total:e.total+a}}))}},{key:"renderTotal",value:function(){var e=JSON.parse(localStorage.getItem("cart")).reduce((function(e,t){return e+t.total*t.price}),0).toFixed(2);this.setState((function(){return{total:e}}))}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("cart")),t=this.state.total;return r.a.createElement("div",null,r.a.createElement("div",{className:"list"},r.a.createElement("div",{className:"list-child"},e.map((function(e){return r.a.createElement("div",{key:e.title},r.a.createElement("div",null,r.a.createElement("span",null,e.title),r.a.createElement("span",null,e.total),r.a.createElement("span",null,e.price)))}))),r.a.createElement("div",{className:"total"},r.a.createElement("span",null,"Total"),r.a.createElement("span",null,t))),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"name"},"Nome Completo:",r.a.createElement("input",{id:"name","data-testid":"checkout-fullname"})),r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{id:"email","data-testid":"checkout-email"})),r.a.createElement("label",{htmlFor:"cpf"},"CPF:",r.a.createElement("input",{id:"cpf","data-testid":"checkout-cpf"})),r.a.createElement("label",{htmlFor:"phone-number"},"Telefone:",r.a.createElement("input",{id:"phone-number","data-testid":"checkout-phone"})),r.a.createElement("label",{htmlFor:"zip"},"CEP:",r.a.createElement("input",{id:"zip","data-testid":"checkout-cep"})),r.a.createElement("label",{htmlFor:"address"},"Endere\xe7o:",r.a.createElement("input",{id:"address","data-testid":"checkout-address"}))),r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{type:"button"},"VOLTAR")))}}]),a}(r.a.Component),D=(a(50),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("span",{className:"nomes"},"Fabiano Emiliano",r.a.createElement("br",null),"Henrique Ba\xeata",r.a.createElement("br",null),"Rodrigo Brezolin",r.a.createElement("br",null),"2020"))}}]),a}(r.a.Component)),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){document.title="Front End Online Store"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/cart",component:w}),r.a.createElement(d.a,{path:"/:id/details",component:M}),r.a.createElement(d.a,{path:"/checkout",component:V}),r.a.createElement(d.a,{exact:!0,path:"/",component:I}))),r.a.createElement(D,null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.5a85fb4b.chunk.js.map